<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>YouTube Clone</title>
    <link rel="stylesheet" href="/css/style.css">
</head>

<body>

    <header>
        <a href="/" class="logo">MyTube</a>
        <div class="search-bar">
            <form action="/" method="GET">
                <input type="text" name="q" placeholder="Search videos..."
                    value="<%= typeof q !== 'undefined' ? q : '' %>">
                <button type="submit">Search</button>

            </form>
        </div>
        <div class="header-right">
            <a href="/upload" class="upload-btn">Upload</a>

            <% if (user) { %>
                <div class="user-info">
                    <img src="<%= user.avatar %>" alt="Avatar" class="avatar">
                    Hello, <%= user.username %> |
                        <a href="/logout">Logout</a>
                </div>
                <% } else { %>
                    <a href="/login">Login</a>
                    <% } %>

        </div>
    </header>

    <main>
        <% if (videos.length===0) { %>
            <p class="no-videos">No videos uploaded yet.</p>
            <% } else { %>
                <div class="video-grid">
                    <% videos.forEach(video=> { %>
                        <div class="video-card">
                            <video src="/uploads/<%= video.filename %>" controls></video>
                            <h3>
                                <%= video.title %>
                            </h3>
                            <p>
                                <%= video.description %>
                            </p>
                            <a href="/watch/<%= video.filename %>">Watch Fullscreen</a>
                        </div>
                        <% }); %>
                </div>
                <% } %>
    </main>
</body>

</html>